   1               		.file	"usart_driver.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__CCP__ = 0x34
   7               	__tmp_reg__ = 0
   8               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
  11               		.cfi_sections	.debug_frame
  12               	.global	USART_InterruptDriver_Initialize
  14               	USART_InterruptDriver_Initialize:
  15               	.LFB11:
  16               		.file 1 "dependencies/hal/xmega/usart_driver.c"
   1:dependencies/hal/xmega/usart_driver.c **** /* This file has been prepared for Doxygen automatic documentation generation.*/
   2:dependencies/hal/xmega/usart_driver.c **** /*! \file *********************************************************************
   3:dependencies/hal/xmega/usart_driver.c ****  *
   4:dependencies/hal/xmega/usart_driver.c ****  * \brief
   5:dependencies/hal/xmega/usart_driver.c ****  *      XMEGA USART driver source file.
   6:dependencies/hal/xmega/usart_driver.c ****  *
   7:dependencies/hal/xmega/usart_driver.c ****  *      This file contains the function implementations the XMEGA interrupt
   8:dependencies/hal/xmega/usart_driver.c ****  *      and polled USART driver.
   9:dependencies/hal/xmega/usart_driver.c ****  *
  10:dependencies/hal/xmega/usart_driver.c ****  *      The driver is not intended for size and/or speed critical code, since
  11:dependencies/hal/xmega/usart_driver.c ****  *      most functions are just a few lines of code, and the function call
  12:dependencies/hal/xmega/usart_driver.c ****  *      overhead would decrease code performance. The driver is intended for
  13:dependencies/hal/xmega/usart_driver.c ****  *      rapid prototyping and documentation purposes for getting started with
  14:dependencies/hal/xmega/usart_driver.c ****  *      the XMEGA ADC module.
  15:dependencies/hal/xmega/usart_driver.c ****  *
  16:dependencies/hal/xmega/usart_driver.c ****  *      For size and/or speed critical code, it is recommended to copy the
  17:dependencies/hal/xmega/usart_driver.c ****  *      function contents directly into your application instead of making
  18:dependencies/hal/xmega/usart_driver.c ****  *      a function call.
  19:dependencies/hal/xmega/usart_driver.c ****  *
  20:dependencies/hal/xmega/usart_driver.c ****  *      Some functions use the following construct:
  21:dependencies/hal/xmega/usart_driver.c ****  *          "some_register = ... | (some_parameter ? SOME_BIT_bm : 0) | ..."
  22:dependencies/hal/xmega/usart_driver.c ****  *      Although the use of the ternary operator ( if ? then : else ) is discouraged,
  23:dependencies/hal/xmega/usart_driver.c ****  *      in some occasions the operator makes it possible to write pretty clean and
  24:dependencies/hal/xmega/usart_driver.c ****  *      neat code. In this driver, the construct is used to set or not set a
  25:dependencies/hal/xmega/usart_driver.c ****  *      configuration bit based on a boolean input parameter, such as
  26:dependencies/hal/xmega/usart_driver.c ****  *      the "some_parameter" in the example above.
  27:dependencies/hal/xmega/usart_driver.c ****  *
  28:dependencies/hal/xmega/usart_driver.c ****  * \par Application note:
  29:dependencies/hal/xmega/usart_driver.c ****  *      AVR1307: Using the XMEGA USART
  30:dependencies/hal/xmega/usart_driver.c ****  *
  31:dependencies/hal/xmega/usart_driver.c ****  * \par Documentation
  32:dependencies/hal/xmega/usart_driver.c ****  *      For comprehensive code documentation, supported compilers, compiler
  33:dependencies/hal/xmega/usart_driver.c ****  *      settings and supported devices see readme.html
  34:dependencies/hal/xmega/usart_driver.c ****  *
  35:dependencies/hal/xmega/usart_driver.c ****  * \author
  36:dependencies/hal/xmega/usart_driver.c ****  *      Atmel Corporation: http://www.atmel.com \n
  37:dependencies/hal/xmega/usart_driver.c ****  *      Support email: avr@atmel.com
  38:dependencies/hal/xmega/usart_driver.c ****  *
  39:dependencies/hal/xmega/usart_driver.c ****  * $Revision: 1694 $
  40:dependencies/hal/xmega/usart_driver.c ****  * $Date: 2008-07-29 14:21:58 +0200 (ti, 29 jul 2008) $  \n
  41:dependencies/hal/xmega/usart_driver.c ****  *
  42:dependencies/hal/xmega/usart_driver.c ****  * Copyright (c) 2008, Atmel Corporation All rights reserved.
  43:dependencies/hal/xmega/usart_driver.c ****  *
  44:dependencies/hal/xmega/usart_driver.c ****  * Redistribution and use in source and binary forms, with or without
  45:dependencies/hal/xmega/usart_driver.c ****  * modification, are permitted provided that the following conditions are met:
  46:dependencies/hal/xmega/usart_driver.c ****  *
  47:dependencies/hal/xmega/usart_driver.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  48:dependencies/hal/xmega/usart_driver.c ****  * this list of conditions and the following disclaimer.
  49:dependencies/hal/xmega/usart_driver.c ****  *
  50:dependencies/hal/xmega/usart_driver.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  51:dependencies/hal/xmega/usart_driver.c ****  * this list of conditions and the following disclaimer in the documentation
  52:dependencies/hal/xmega/usart_driver.c ****  * and/or other materials provided with the distribution.
  53:dependencies/hal/xmega/usart_driver.c ****  *
  54:dependencies/hal/xmega/usart_driver.c ****  * 3. The name of ATMEL may not be used to endorse or promote products derived
  55:dependencies/hal/xmega/usart_driver.c ****  * from this software without specific prior written permission.
  56:dependencies/hal/xmega/usart_driver.c ****  *
  57:dependencies/hal/xmega/usart_driver.c ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  58:dependencies/hal/xmega/usart_driver.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  59:dependencies/hal/xmega/usart_driver.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY AND
  60:dependencies/hal/xmega/usart_driver.c ****  * SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT,
  61:dependencies/hal/xmega/usart_driver.c ****  * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  62:dependencies/hal/xmega/usart_driver.c ****  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  63:dependencies/hal/xmega/usart_driver.c ****  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  64:dependencies/hal/xmega/usart_driver.c ****  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  65:dependencies/hal/xmega/usart_driver.c ****  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  66:dependencies/hal/xmega/usart_driver.c ****  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  67:dependencies/hal/xmega/usart_driver.c ****  *****************************************************************************/
  68:dependencies/hal/xmega/usart_driver.c **** #include "usart_driver.h"
  69:dependencies/hal/xmega/usart_driver.c **** 
  70:dependencies/hal/xmega/usart_driver.c **** 
  71:dependencies/hal/xmega/usart_driver.c **** 
  72:dependencies/hal/xmega/usart_driver.c **** /*! \brief Initializes buffer and selects what USART module to use.
  73:dependencies/hal/xmega/usart_driver.c ****  *
  74:dependencies/hal/xmega/usart_driver.c ****  *  Initializes receive and transmit buffer and selects what USART module to use,
  75:dependencies/hal/xmega/usart_driver.c ****  *  and stores the data register empty interrupt level.
  76:dependencies/hal/xmega/usart_driver.c ****  *
  77:dependencies/hal/xmega/usart_driver.c ****  *  \param usart_data           The USART_data_t struct instance.
  78:dependencies/hal/xmega/usart_driver.c ****  *  \param usart                The USART module.
  79:dependencies/hal/xmega/usart_driver.c ****  *  \param dreIntLevel          Data register empty interrupt level.
  80:dependencies/hal/xmega/usart_driver.c ****  */
  81:dependencies/hal/xmega/usart_driver.c **** void USART_InterruptDriver_Initialize(USART_data_t * usart_data,
  82:dependencies/hal/xmega/usart_driver.c ****                                       USART_t * usart,
  83:dependencies/hal/xmega/usart_driver.c ****                                       USART_DREINTLVL_t dreIntLevel)
  84:dependencies/hal/xmega/usart_driver.c **** {
  17               		.loc 1 84 0
  18               		.cfi_startproc
  19               	.LVL0:
  20               	/* prologue: function */
  21               	/* frame size = 0 */
  22               	/* stack size = 0 */
  23               	.L__stack_usage = 0
  24 0000 FC01      		movw r30,r24
  85:dependencies/hal/xmega/usart_driver.c **** 	usart_data->usart = usart;
  25               		.loc 1 85 0
  26 0002 6083      		st Z,r22
  27 0004 7183      		std Z+1,r23
  86:dependencies/hal/xmega/usart_driver.c **** 	usart_data->dreIntLevel = dreIntLevel;
  28               		.loc 1 86 0
  29 0006 4283      		std Z+2,r20
  87:dependencies/hal/xmega/usart_driver.c **** 
  88:dependencies/hal/xmega/usart_driver.c **** 	usart_data->buffer.RX_Tail = 0;
  30               		.loc 1 88 0
  31 0008 1486      		std Z+12,__zero_reg__
  89:dependencies/hal/xmega/usart_driver.c **** 	usart_data->buffer.RX_Head = 0;
  32               		.loc 1 89 0
  33 000a 1386      		std Z+11,__zero_reg__
  90:dependencies/hal/xmega/usart_driver.c **** 	usart_data->buffer.TX_Tail = 0;
  34               		.loc 1 90 0
  35 000c 1686      		std Z+14,__zero_reg__
  91:dependencies/hal/xmega/usart_driver.c **** 	usart_data->buffer.TX_Head = 0;
  36               		.loc 1 91 0
  37 000e 1586      		std Z+13,__zero_reg__
  38               	/* epilogue start */
  92:dependencies/hal/xmega/usart_driver.c **** }
  39               		.loc 1 92 0
  40 0010 0895      		ret
  41               		.cfi_endproc
  42               	.LFE11:
  44               	.global	USART_InterruptDriver_DreInterruptLevel_Set
  46               	USART_InterruptDriver_DreInterruptLevel_Set:
  47               	.LFB12:
  93:dependencies/hal/xmega/usart_driver.c **** 
  94:dependencies/hal/xmega/usart_driver.c **** 
  95:dependencies/hal/xmega/usart_driver.c **** /*! \brief Set USART DRE interrupt level.
  96:dependencies/hal/xmega/usart_driver.c ****  *
  97:dependencies/hal/xmega/usart_driver.c ****  *  Set the interrupt level on Data Register interrupt.
  98:dependencies/hal/xmega/usart_driver.c ****  *
  99:dependencies/hal/xmega/usart_driver.c ****  *  \note Changing the DRE interrupt level in the interrupt driver while it is
 100:dependencies/hal/xmega/usart_driver.c ****  *        running will not change the DRE interrupt level in the USART before the
 101:dependencies/hal/xmega/usart_driver.c ****  *        DRE interrupt have been disabled and enabled again.
 102:dependencies/hal/xmega/usart_driver.c ****  *
 103:dependencies/hal/xmega/usart_driver.c ****  *  \param usart_data         The USART_data_t struct instance
 104:dependencies/hal/xmega/usart_driver.c ****  *  \param dreIntLevel        Interrupt level of the DRE interrupt.
 105:dependencies/hal/xmega/usart_driver.c ****  */
 106:dependencies/hal/xmega/usart_driver.c **** void USART_InterruptDriver_DreInterruptLevel_Set(USART_data_t * usart_data,
 107:dependencies/hal/xmega/usart_driver.c ****                                                  USART_DREINTLVL_t dreIntLevel)
 108:dependencies/hal/xmega/usart_driver.c **** {
  48               		.loc 1 108 0
  49               		.cfi_startproc
  50               	.LVL1:
  51               	/* prologue: function */
  52               	/* frame size = 0 */
  53               	/* stack size = 0 */
  54               	.L__stack_usage = 0
 109:dependencies/hal/xmega/usart_driver.c **** 	usart_data->dreIntLevel = dreIntLevel;
  55               		.loc 1 109 0
  56 0012 FC01      		movw r30,r24
  57 0014 6283      		std Z+2,r22
  58               	/* epilogue start */
 110:dependencies/hal/xmega/usart_driver.c **** }
  59               		.loc 1 110 0
  60 0016 0895      		ret
  61               		.cfi_endproc
  62               	.LFE12:
  64               	.global	USART_TXBuffer_FreeSpace
  66               	USART_TXBuffer_FreeSpace:
  67               	.LFB13:
 111:dependencies/hal/xmega/usart_driver.c **** 
 112:dependencies/hal/xmega/usart_driver.c **** 
 113:dependencies/hal/xmega/usart_driver.c **** /*! \brief Test if there is data in the transmitter software buffer.
 114:dependencies/hal/xmega/usart_driver.c ****  *
 115:dependencies/hal/xmega/usart_driver.c ****  *  This function can be used to test if there is free space in the transmitter
 116:dependencies/hal/xmega/usart_driver.c ****  *  software buffer.
 117:dependencies/hal/xmega/usart_driver.c ****  *
 118:dependencies/hal/xmega/usart_driver.c ****  *  \param usart_data The USART_data_t struct instance.
 119:dependencies/hal/xmega/usart_driver.c ****  *
 120:dependencies/hal/xmega/usart_driver.c ****  *  \retval true      There is data in the receive buffer.
 121:dependencies/hal/xmega/usart_driver.c ****  *  \retval false     The receive buffer is empty.
 122:dependencies/hal/xmega/usart_driver.c ****  */
 123:dependencies/hal/xmega/usart_driver.c **** bool USART_TXBuffer_FreeSpace(USART_data_t * usart_data)
 124:dependencies/hal/xmega/usart_driver.c **** {
  68               		.loc 1 124 0
  69               		.cfi_startproc
  70               	.LVL2:
  71               	/* prologue: function */
  72               	/* frame size = 0 */
  73               	/* stack size = 0 */
  74               	.L__stack_usage = 0
  75 0018 FC01      		movw r30,r24
 125:dependencies/hal/xmega/usart_driver.c **** 	/* Make copies to make sure that volatile access is specified. */
 126:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempHead = (usart_data->buffer.TX_Head + 1) & USART_TX_BUFFER_MASK;
  76               		.loc 1 126 0
  77 001a 9585      		ldd r25,Z+13
  78               	.LVL3:
 127:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempTail = usart_data->buffer.TX_Tail;
  79               		.loc 1 127 0
  80 001c 2685      		ldd r18,Z+14
  81               	.LVL4:
 126:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempTail = usart_data->buffer.TX_Tail;
  82               		.loc 1 126 0
  83 001e 9F5F      		subi r25,lo8(-(1))
  84               	.LVL5:
  85 0020 9370      		andi r25,lo8(3)
  86               	.LVL6:
 128:dependencies/hal/xmega/usart_driver.c **** 
 129:dependencies/hal/xmega/usart_driver.c **** 	/* There are data left in the buffer unless Head and Tail are equal. */
 130:dependencies/hal/xmega/usart_driver.c **** 	return (tempHead != tempTail);
  87               		.loc 1 130 0
  88 0022 81E0      		ldi r24,lo8(1)
  89               	.LVL7:
  90 0024 9213      		cpse r25,r18
  91 0026 00C0      		rjmp .L4
  92 0028 80E0      		ldi r24,0
  93               	.L4:
  94               	/* epilogue start */
 131:dependencies/hal/xmega/usart_driver.c **** }
  95               		.loc 1 131 0
  96 002a 0895      		ret
  97               		.cfi_endproc
  98               	.LFE13:
 100               	.global	USART_TXBuffer_PutByte
 102               	USART_TXBuffer_PutByte:
 103               	.LFB14:
 132:dependencies/hal/xmega/usart_driver.c **** 
 133:dependencies/hal/xmega/usart_driver.c **** 
 134:dependencies/hal/xmega/usart_driver.c **** 
 135:dependencies/hal/xmega/usart_driver.c **** /*! \brief Put data (5-8 bit character).
 136:dependencies/hal/xmega/usart_driver.c ****  *
 137:dependencies/hal/xmega/usart_driver.c ****  *  Stores data byte in TX software buffer and enables DRE interrupt if there
 138:dependencies/hal/xmega/usart_driver.c ****  *  is free space in the TX software buffer.
 139:dependencies/hal/xmega/usart_driver.c ****  *
 140:dependencies/hal/xmega/usart_driver.c ****  *  \param usart_data The USART_data_t struct instance.
 141:dependencies/hal/xmega/usart_driver.c ****  *  \param data       The data to send.
 142:dependencies/hal/xmega/usart_driver.c ****  */
 143:dependencies/hal/xmega/usart_driver.c **** bool USART_TXBuffer_PutByte(USART_data_t * usart_data, uint8_t data)
 144:dependencies/hal/xmega/usart_driver.c **** {
 104               		.loc 1 144 0
 105               		.cfi_startproc
 106               	.LVL8:
 107 002c 1F93      		push r17
 108               	.LCFI0:
 109               		.cfi_def_cfa_offset 4
 110               		.cfi_offset 17, -3
 111 002e CF93      		push r28
 112               	.LCFI1:
 113               		.cfi_def_cfa_offset 5
 114               		.cfi_offset 28, -4
 115 0030 DF93      		push r29
 116               	.LCFI2:
 117               		.cfi_def_cfa_offset 6
 118               		.cfi_offset 29, -5
 119               	/* prologue: function */
 120               	/* frame size = 0 */
 121               	/* stack size = 3 */
 122               	.L__stack_usage = 3
 123 0032 EC01      		movw r28,r24
 124 0034 162F      		mov r17,r22
 125               	.LVL9:
 145:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempCTRLA;
 146:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempTX_Head;
 147:dependencies/hal/xmega/usart_driver.c **** 	bool TXBuffer_FreeSpace;
 148:dependencies/hal/xmega/usart_driver.c **** 	USART_Buffer_t * TXbufPtr;
 149:dependencies/hal/xmega/usart_driver.c **** 
 150:dependencies/hal/xmega/usart_driver.c **** 	TXbufPtr = &usart_data->buffer;
 151:dependencies/hal/xmega/usart_driver.c **** 	TXBuffer_FreeSpace = USART_TXBuffer_FreeSpace(usart_data);
 126               		.loc 1 151 0
 127 0036 0E94 0000 		call USART_TXBuffer_FreeSpace
 128               	.LVL10:
 152:dependencies/hal/xmega/usart_driver.c **** 
 153:dependencies/hal/xmega/usart_driver.c **** 
 154:dependencies/hal/xmega/usart_driver.c **** 	if(TXBuffer_FreeSpace)
 129               		.loc 1 154 0
 130 003a 8823      		tst r24
 131 003c 01F0      		breq .L5
 155:dependencies/hal/xmega/usart_driver.c **** 	{
 156:dependencies/hal/xmega/usart_driver.c **** 	  	tempTX_Head = TXbufPtr->TX_Head;
 132               		.loc 1 156 0
 133 003e 9D85      		ldd r25,Y+13
 134               	.LVL11:
 157:dependencies/hal/xmega/usart_driver.c **** 	  	TXbufPtr->TX[tempTX_Head]= data;
 135               		.loc 1 157 0
 136 0040 FE01      		movw r30,r28
 137 0042 E90F      		add r30,r25
 138 0044 F11D      		adc r31,__zero_reg__
 139 0046 1783      		std Z+7,r17
 158:dependencies/hal/xmega/usart_driver.c **** 		/* Advance buffer head. */
 159:dependencies/hal/xmega/usart_driver.c **** 		TXbufPtr->TX_Head = (tempTX_Head + 1) & USART_TX_BUFFER_MASK;
 140               		.loc 1 159 0
 141 0048 9F5F      		subi r25,lo8(-(1))
 142               	.LVL12:
 143 004a 9370      		andi r25,lo8(3)
 144               	.LVL13:
 145 004c 9D87      		std Y+13,r25
 160:dependencies/hal/xmega/usart_driver.c **** 
 161:dependencies/hal/xmega/usart_driver.c **** 		/* Enable DRE interrupt. */
 162:dependencies/hal/xmega/usart_driver.c **** 		tempCTRLA = usart_data->usart->CTRLA;
 146               		.loc 1 162 0
 147 004e E881      		ld r30,Y
 148 0050 F981      		ldd r31,Y+1
 149 0052 9381      		ldd r25,Z+3
 150               	.LVL14:
 163:dependencies/hal/xmega/usart_driver.c **** 		tempCTRLA = (tempCTRLA & ~USART_DREINTLVL_gm) | usart_data->dreIntLevel;
 151               		.loc 1 163 0
 152 0054 9C7F      		andi r25,lo8(-4)
 153               	.LVL15:
 154 0056 2A81      		ldd r18,Y+2
 155 0058 922B      		or r25,r18
 156               	.LVL16:
 164:dependencies/hal/xmega/usart_driver.c **** 		usart_data->usart->CTRLA = tempCTRLA;
 157               		.loc 1 164 0
 158 005a 9383      		std Z+3,r25
 159               	.LVL17:
 160               	.L5:
 161               	/* epilogue start */
 165:dependencies/hal/xmega/usart_driver.c **** 	}
 166:dependencies/hal/xmega/usart_driver.c **** 	return TXBuffer_FreeSpace;
 167:dependencies/hal/xmega/usart_driver.c **** }
 162               		.loc 1 167 0
 163 005c DF91      		pop r29
 164 005e CF91      		pop r28
 165               	.LVL18:
 166 0060 1F91      		pop r17
 167               	.LVL19:
 168 0062 0895      		ret
 169               		.cfi_endproc
 170               	.LFE14:
 172               	.global	USART_RXBufferData_Available
 174               	USART_RXBufferData_Available:
 175               	.LFB15:
 168:dependencies/hal/xmega/usart_driver.c **** 
 169:dependencies/hal/xmega/usart_driver.c **** 
 170:dependencies/hal/xmega/usart_driver.c **** 
 171:dependencies/hal/xmega/usart_driver.c **** /*! \brief Test if there is data in the receive software buffer.
 172:dependencies/hal/xmega/usart_driver.c ****  *
 173:dependencies/hal/xmega/usart_driver.c ****  *  This function can be used to test if there is data in the receive software
 174:dependencies/hal/xmega/usart_driver.c ****  *  buffer.
 175:dependencies/hal/xmega/usart_driver.c ****  *
 176:dependencies/hal/xmega/usart_driver.c ****  *  \param usart_data         The USART_data_t struct instance
 177:dependencies/hal/xmega/usart_driver.c ****  *
 178:dependencies/hal/xmega/usart_driver.c ****  *  \retval true      There is data in the receive buffer.
 179:dependencies/hal/xmega/usart_driver.c ****  *  \retval false     The receive buffer is empty.
 180:dependencies/hal/xmega/usart_driver.c ****  */
 181:dependencies/hal/xmega/usart_driver.c **** bool USART_RXBufferData_Available(USART_data_t * usart_data)
 182:dependencies/hal/xmega/usart_driver.c **** {
 176               		.loc 1 182 0
 177               		.cfi_startproc
 178               	.LVL20:
 179               	/* prologue: function */
 180               	/* frame size = 0 */
 181               	/* stack size = 0 */
 182               	.L__stack_usage = 0
 183:dependencies/hal/xmega/usart_driver.c **** 	/* Make copies to make sure that volatile access is specified. */
 184:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempHead = usart_data->buffer.RX_Head;
 183               		.loc 1 184 0
 184 0064 FC01      		movw r30,r24
 185 0066 2385      		ldd r18,Z+11
 186               	.LVL21:
 185:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempTail = usart_data->buffer.RX_Tail;
 187               		.loc 1 185 0
 188 0068 9485      		ldd r25,Z+12
 189               	.LVL22:
 186:dependencies/hal/xmega/usart_driver.c **** 
 187:dependencies/hal/xmega/usart_driver.c **** 	/* There are data left in the buffer unless Head and Tail are equal. */
 188:dependencies/hal/xmega/usart_driver.c **** 	return (tempHead != tempTail);
 190               		.loc 1 188 0
 191 006a 81E0      		ldi r24,lo8(1)
 192               	.LVL23:
 193 006c 2913      		cpse r18,r25
 194 006e 00C0      		rjmp .L11
 195 0070 80E0      		ldi r24,0
 196               	.L11:
 197               	/* epilogue start */
 189:dependencies/hal/xmega/usart_driver.c **** }
 198               		.loc 1 189 0
 199 0072 0895      		ret
 200               		.cfi_endproc
 201               	.LFE15:
 203               	.global	USART_RXBuffer_GetByte
 205               	USART_RXBuffer_GetByte:
 206               	.LFB16:
 190:dependencies/hal/xmega/usart_driver.c **** 
 191:dependencies/hal/xmega/usart_driver.c **** 
 192:dependencies/hal/xmega/usart_driver.c **** 
 193:dependencies/hal/xmega/usart_driver.c **** /*! \brief Get received data (5-8 bit character).
 194:dependencies/hal/xmega/usart_driver.c ****  *
 195:dependencies/hal/xmega/usart_driver.c ****  *  The function USART_RXBufferData_Available should be used before this
 196:dependencies/hal/xmega/usart_driver.c ****  *  function is used to ensure that data is available.
 197:dependencies/hal/xmega/usart_driver.c ****  *
 198:dependencies/hal/xmega/usart_driver.c ****  *  Returns data from RX software buffer.
 199:dependencies/hal/xmega/usart_driver.c ****  *
 200:dependencies/hal/xmega/usart_driver.c ****  *  \param usart_data       The USART_data_t struct instance.
 201:dependencies/hal/xmega/usart_driver.c ****  *
 202:dependencies/hal/xmega/usart_driver.c ****  *  \return         Received data.
 203:dependencies/hal/xmega/usart_driver.c ****  */
 204:dependencies/hal/xmega/usart_driver.c **** uint8_t USART_RXBuffer_GetByte(USART_data_t * usart_data)
 205:dependencies/hal/xmega/usart_driver.c **** {
 207               		.loc 1 205 0
 208               		.cfi_startproc
 209               	.LVL24:
 210               	/* prologue: function */
 211               	/* frame size = 0 */
 212               	/* stack size = 0 */
 213               	.L__stack_usage = 0
 214 0074 FC01      		movw r30,r24
 215               	.LVL25:
 206:dependencies/hal/xmega/usart_driver.c **** 	USART_Buffer_t * bufPtr;
 207:dependencies/hal/xmega/usart_driver.c **** 	uint8_t ans;
 208:dependencies/hal/xmega/usart_driver.c **** 
 209:dependencies/hal/xmega/usart_driver.c **** 	bufPtr = &usart_data->buffer;
 210:dependencies/hal/xmega/usart_driver.c **** 	ans = (bufPtr->RX[bufPtr->RX_Tail]);
 216               		.loc 1 210 0
 217 0076 A485      		ldd r26,Z+12
 218 0078 A80F      		add r26,r24
 219 007a B92F      		mov r27,r25
 220 007c B11D      		adc r27,__zero_reg__
 221 007e 1396      		adiw r26,3
 222 0080 8C91      		ld r24,X
 223               	.LVL26:
 211:dependencies/hal/xmega/usart_driver.c **** 
 212:dependencies/hal/xmega/usart_driver.c **** 	/* Advance buffer tail. */
 213:dependencies/hal/xmega/usart_driver.c **** 	bufPtr->RX_Tail = (bufPtr->RX_Tail + 1) & USART_RX_BUFFER_MASK;
 224               		.loc 1 213 0
 225 0082 9485      		ldd r25,Z+12
 226 0084 9F5F      		subi r25,lo8(-(1))
 227 0086 9370      		andi r25,lo8(3)
 228 0088 9487      		std Z+12,r25
 229               	/* epilogue start */
 214:dependencies/hal/xmega/usart_driver.c **** 
 215:dependencies/hal/xmega/usart_driver.c **** 	return ans;
 216:dependencies/hal/xmega/usart_driver.c **** }
 230               		.loc 1 216 0
 231 008a 0895      		ret
 232               		.cfi_endproc
 233               	.LFE16:
 235               	.global	USART_RXComplete
 237               	USART_RXComplete:
 238               	.LFB17:
 217:dependencies/hal/xmega/usart_driver.c **** 
 218:dependencies/hal/xmega/usart_driver.c **** 
 219:dependencies/hal/xmega/usart_driver.c **** 
 220:dependencies/hal/xmega/usart_driver.c **** /*! \brief RX Complete Interrupt Service Routine.
 221:dependencies/hal/xmega/usart_driver.c ****  *
 222:dependencies/hal/xmega/usart_driver.c ****  *  RX Complete Interrupt Service Routine.
 223:dependencies/hal/xmega/usart_driver.c ****  *  Stores received data in RX software buffer.
 224:dependencies/hal/xmega/usart_driver.c ****  *
 225:dependencies/hal/xmega/usart_driver.c ****  *  \param usart_data      The USART_data_t struct instance.
 226:dependencies/hal/xmega/usart_driver.c ****  */
 227:dependencies/hal/xmega/usart_driver.c **** bool USART_RXComplete(USART_data_t * usart_data)
 228:dependencies/hal/xmega/usart_driver.c **** {
 239               		.loc 1 228 0
 240               		.cfi_startproc
 241               	.LVL27:
 242               	/* prologue: function */
 243               	/* frame size = 0 */
 244               	/* stack size = 0 */
 245               	.L__stack_usage = 0
 246 008c FC01      		movw r30,r24
 247               	.LVL28:
 229:dependencies/hal/xmega/usart_driver.c **** 	USART_Buffer_t * bufPtr;
 230:dependencies/hal/xmega/usart_driver.c **** 	bool ans;
 231:dependencies/hal/xmega/usart_driver.c **** 
 232:dependencies/hal/xmega/usart_driver.c **** 	bufPtr = &usart_data->buffer;
 233:dependencies/hal/xmega/usart_driver.c **** 	/* Advance buffer head. */
 234:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempRX_Head = (bufPtr->RX_Head + 1) & USART_RX_BUFFER_MASK;
 248               		.loc 1 234 0
 249 008e 8385      		ldd r24,Z+11
 250               	.LVL29:
 251 0090 8F5F      		subi r24,lo8(-(1))
 252 0092 8370      		andi r24,lo8(3)
 253               	.LVL30:
 235:dependencies/hal/xmega/usart_driver.c **** 
 236:dependencies/hal/xmega/usart_driver.c **** 	/* Check for overflow. */
 237:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempRX_Tail = bufPtr->RX_Tail;
 254               		.loc 1 237 0
 255 0094 2485      		ldd r18,Z+12
 256               	.LVL31:
 238:dependencies/hal/xmega/usart_driver.c **** 	uint8_t data = usart_data->usart->DATA;
 257               		.loc 1 238 0
 258 0096 A081      		ld r26,Z
 259 0098 B181      		ldd r27,Z+1
 260 009a 9C91      		ld r25,X
 261               	.LVL32:
 239:dependencies/hal/xmega/usart_driver.c **** 
 240:dependencies/hal/xmega/usart_driver.c **** 	if (tempRX_Head == tempRX_Tail) {
 262               		.loc 1 240 0
 263 009c 8217      		cp r24,r18
 264 009e 01F0      		breq .L15
 265               	.LVL33:
 241:dependencies/hal/xmega/usart_driver.c **** 	  	ans = false;
 242:dependencies/hal/xmega/usart_driver.c **** 	}else{
 243:dependencies/hal/xmega/usart_driver.c **** 		ans = true;
 244:dependencies/hal/xmega/usart_driver.c **** 		usart_data->buffer.RX[usart_data->buffer.RX_Head] = data;
 266               		.loc 1 244 0
 267 00a0 A385      		ldd r26,Z+11
 268 00a2 AE0F      		add r26,r30
 269 00a4 BF2F      		mov r27,r31
 270 00a6 B11D      		adc r27,__zero_reg__
 271 00a8 1396      		adiw r26,3
 272 00aa 9C93      		st X,r25
 245:dependencies/hal/xmega/usart_driver.c **** 		usart_data->buffer.RX_Head = tempRX_Head;
 273               		.loc 1 245 0
 274 00ac 8387      		std Z+11,r24
 243:dependencies/hal/xmega/usart_driver.c **** 		usart_data->buffer.RX[usart_data->buffer.RX_Head] = data;
 275               		.loc 1 243 0
 276 00ae 81E0      		ldi r24,lo8(1)
 277               	.LVL34:
 278 00b0 0895      		ret
 279               	.LVL35:
 280               	.L15:
 241:dependencies/hal/xmega/usart_driver.c **** 	  	ans = false;
 281               		.loc 1 241 0
 282 00b2 80E0      		ldi r24,0
 283               	.LVL36:
 284               	/* epilogue start */
 246:dependencies/hal/xmega/usart_driver.c **** 	}
 247:dependencies/hal/xmega/usart_driver.c **** 	return ans;
 248:dependencies/hal/xmega/usart_driver.c **** }
 285               		.loc 1 248 0
 286 00b4 0895      		ret
 287               		.cfi_endproc
 288               	.LFE17:
 290               	.global	USART_DataRegEmpty
 292               	USART_DataRegEmpty:
 293               	.LFB18:
 249:dependencies/hal/xmega/usart_driver.c **** 
 250:dependencies/hal/xmega/usart_driver.c **** 
 251:dependencies/hal/xmega/usart_driver.c **** 
 252:dependencies/hal/xmega/usart_driver.c **** /*! \brief Data Register Empty Interrupt Service Routine.
 253:dependencies/hal/xmega/usart_driver.c ****  *
 254:dependencies/hal/xmega/usart_driver.c ****  *  Data Register Empty Interrupt Service Routine.
 255:dependencies/hal/xmega/usart_driver.c ****  *  Transmits one byte from TX software buffer. Disables DRE interrupt if buffer
 256:dependencies/hal/xmega/usart_driver.c ****  *  is empty. Argument is pointer to USART (USART_data_t).
 257:dependencies/hal/xmega/usart_driver.c ****  *
 258:dependencies/hal/xmega/usart_driver.c ****  *  \param usart_data      The USART_data_t struct instance.
 259:dependencies/hal/xmega/usart_driver.c ****  */
 260:dependencies/hal/xmega/usart_driver.c **** void USART_DataRegEmpty(USART_data_t * usart_data)
 261:dependencies/hal/xmega/usart_driver.c **** {
 294               		.loc 1 261 0
 295               		.cfi_startproc
 296               	.LVL37:
 297 00b6 CF93      		push r28
 298               	.LCFI3:
 299               		.cfi_def_cfa_offset 4
 300               		.cfi_offset 28, -3
 301 00b8 DF93      		push r29
 302               	.LCFI4:
 303               		.cfi_def_cfa_offset 5
 304               		.cfi_offset 29, -4
 305               	/* prologue: function */
 306               	/* frame size = 0 */
 307               	/* stack size = 2 */
 308               	.L__stack_usage = 2
 309 00ba FC01      		movw r30,r24
 310               	.LVL38:
 262:dependencies/hal/xmega/usart_driver.c **** 	USART_Buffer_t * bufPtr;
 263:dependencies/hal/xmega/usart_driver.c **** 	bufPtr = &usart_data->buffer;
 264:dependencies/hal/xmega/usart_driver.c **** 
 265:dependencies/hal/xmega/usart_driver.c **** 	/* Check if all data is transmitted. */
 266:dependencies/hal/xmega/usart_driver.c **** 	uint8_t tempTX_Tail = usart_data->buffer.TX_Tail;
 311               		.loc 1 266 0
 312 00bc 8685      		ldd r24,Z+14
 313               	.LVL39:
 267:dependencies/hal/xmega/usart_driver.c **** 	if (bufPtr->TX_Head == tempTX_Tail){
 314               		.loc 1 267 0
 315 00be 9585      		ldd r25,Z+13
 316 00c0 A081      		ld r26,Z
 317 00c2 B181      		ldd r27,Z+1
 318 00c4 9813      		cpse r25,r24
 319 00c6 00C0      		rjmp .L17
 320               	.LBB2:
 268:dependencies/hal/xmega/usart_driver.c **** 	    /* Disable DRE interrupts. */
 269:dependencies/hal/xmega/usart_driver.c **** 		uint8_t tempCTRLA = usart_data->usart->CTRLA;
 321               		.loc 1 269 0
 322 00c8 1396      		adiw r26,3
 323 00ca 8C91      		ld r24,X
 324 00cc 1397      		sbiw r26,3
 325               	.LVL40:
 270:dependencies/hal/xmega/usart_driver.c **** 		tempCTRLA = (tempCTRLA & ~USART_DREINTLVL_gm) | USART_DREINTLVL_OFF_gc;
 326               		.loc 1 270 0
 327 00ce 8C7F      		andi r24,lo8(-4)
 328               	.LVL41:
 271:dependencies/hal/xmega/usart_driver.c **** 		usart_data->usart->CTRLA = tempCTRLA;
 329               		.loc 1 271 0
 330 00d0 1396      		adiw r26,3
 331 00d2 8C93      		st X,r24
 332               	.LVL42:
 333               	.L16:
 334               	/* epilogue start */
 335               	.LBE2:
 272:dependencies/hal/xmega/usart_driver.c **** 
 273:dependencies/hal/xmega/usart_driver.c **** 	}else{
 274:dependencies/hal/xmega/usart_driver.c **** 		/* Start transmitting. */
 275:dependencies/hal/xmega/usart_driver.c **** 		uint8_t data = bufPtr->TX[usart_data->buffer.TX_Tail];
 276:dependencies/hal/xmega/usart_driver.c **** 		usart_data->usart->DATA = data;
 277:dependencies/hal/xmega/usart_driver.c **** 
 278:dependencies/hal/xmega/usart_driver.c **** 		/* Advance buffer tail. */
 279:dependencies/hal/xmega/usart_driver.c **** 		bufPtr->TX_Tail = (bufPtr->TX_Tail + 1) & USART_TX_BUFFER_MASK;
 280:dependencies/hal/xmega/usart_driver.c **** 	}
 281:dependencies/hal/xmega/usart_driver.c **** }
 336               		.loc 1 281 0
 337 00d4 DF91      		pop r29
 338 00d6 CF91      		pop r28
 339 00d8 0895      		ret
 340               	.LVL43:
 341               	.L17:
 342               	.LBB3:
 275:dependencies/hal/xmega/usart_driver.c **** 		usart_data->usart->DATA = data;
 343               		.loc 1 275 0
 344 00da C685      		ldd r28,Z+14
 345 00dc CE0F      		add r28,r30
 346 00de DF2F      		mov r29,r31
 347 00e0 D11D      		adc r29,__zero_reg__
 348 00e2 8F81      		ldd r24,Y+7
 349               	.LVL44:
 276:dependencies/hal/xmega/usart_driver.c **** 
 350               		.loc 1 276 0
 351 00e4 8C93      		st X,r24
 279:dependencies/hal/xmega/usart_driver.c **** 	}
 352               		.loc 1 279 0
 353 00e6 8685      		ldd r24,Z+14
 354               	.LVL45:
 355 00e8 8F5F      		subi r24,lo8(-(1))
 356 00ea 8370      		andi r24,lo8(3)
 357 00ec 8687      		std Z+14,r24
 358               	.LVL46:
 359               	.LBE3:
 360               		.loc 1 281 0
 361 00ee 00C0      		rjmp .L16
 362               		.cfi_endproc
 363               	.LFE18:
 365               	.global	USART_NineBits_PutChar
 367               	USART_NineBits_PutChar:
 368               	.LFB19:
 282:dependencies/hal/xmega/usart_driver.c **** 
 283:dependencies/hal/xmega/usart_driver.c **** 
 284:dependencies/hal/xmega/usart_driver.c **** /*! \brief Put data (9 bit character).
 285:dependencies/hal/xmega/usart_driver.c ****  *
 286:dependencies/hal/xmega/usart_driver.c ****  *  Use the function USART_IsTXDataRegisterEmpty before using this function to
 287:dependencies/hal/xmega/usart_driver.c ****  *  put 9 bit character to the TX register.
 288:dependencies/hal/xmega/usart_driver.c ****  *
 289:dependencies/hal/xmega/usart_driver.c ****  *  \param usart      The USART module.
 290:dependencies/hal/xmega/usart_driver.c ****  *  \param data       The data to send.
 291:dependencies/hal/xmega/usart_driver.c ****  */
 292:dependencies/hal/xmega/usart_driver.c **** void USART_NineBits_PutChar(USART_t * usart, uint16_t data)
 293:dependencies/hal/xmega/usart_driver.c **** {
 369               		.loc 1 293 0
 370               		.cfi_startproc
 371               	.LVL47:
 372               	/* prologue: function */
 373               	/* frame size = 0 */
 374               	/* stack size = 0 */
 375               	.L__stack_usage = 0
 376 00f0 FC01      		movw r30,r24
 294:dependencies/hal/xmega/usart_driver.c **** 	if(data & 0x0100) {
 295:dependencies/hal/xmega/usart_driver.c **** 		usart->CTRLB |= USART_TXB8_bm;
 377               		.loc 1 295 0
 378 00f2 8481      		ldd r24,Z+4
 379               	.LVL48:
 294:dependencies/hal/xmega/usart_driver.c **** 	if(data & 0x0100) {
 380               		.loc 1 294 0
 381 00f4 70FF      		sbrs r23,0
 382 00f6 00C0      		rjmp .L20
 383               		.loc 1 295 0
 384 00f8 8160      		ori r24,lo8(1)
 385               	.L22:
 296:dependencies/hal/xmega/usart_driver.c **** 	}else {
 297:dependencies/hal/xmega/usart_driver.c **** 		usart->CTRLB &= ~USART_TXB8_bm;
 386               		.loc 1 297 0
 387 00fa 8483      		std Z+4,r24
 298:dependencies/hal/xmega/usart_driver.c **** 	}
 299:dependencies/hal/xmega/usart_driver.c **** 
 300:dependencies/hal/xmega/usart_driver.c **** 	usart->DATA = (data & 0x00FF);
 388               		.loc 1 300 0
 389 00fc 6083      		st Z,r22
 390               	/* epilogue start */
 301:dependencies/hal/xmega/usart_driver.c **** }
 391               		.loc 1 301 0
 392 00fe 0895      		ret
 393               	.L20:
 297:dependencies/hal/xmega/usart_driver.c **** 	}
 394               		.loc 1 297 0
 395 0100 8E7F      		andi r24,lo8(-2)
 396 0102 00C0      		rjmp .L22
 397               		.cfi_endproc
 398               	.LFE19:
 400               	.global	USART_NineBits_GetChar
 402               	USART_NineBits_GetChar:
 403               	.LFB20:
 302:dependencies/hal/xmega/usart_driver.c **** 
 303:dependencies/hal/xmega/usart_driver.c **** 
 304:dependencies/hal/xmega/usart_driver.c **** /*! \brief Get received data (9 bit character).
 305:dependencies/hal/xmega/usart_driver.c ****  *
 306:dependencies/hal/xmega/usart_driver.c ****  *  This function reads out the received 9 bit character (uint16_t).
 307:dependencies/hal/xmega/usart_driver.c ****  *  Use the function USART_IsRXComplete to check if anything is received.
 308:dependencies/hal/xmega/usart_driver.c ****  *
 309:dependencies/hal/xmega/usart_driver.c ****  *  \param usart      The USART module.
 310:dependencies/hal/xmega/usart_driver.c ****  *
 311:dependencies/hal/xmega/usart_driver.c ****  *  \retval           Received data.
 312:dependencies/hal/xmega/usart_driver.c ****  */
 313:dependencies/hal/xmega/usart_driver.c **** uint16_t USART_NineBits_GetChar(USART_t * usart)
 314:dependencies/hal/xmega/usart_driver.c **** {
 404               		.loc 1 314 0
 405               		.cfi_startproc
 406               	.LVL49:
 407               	/* prologue: function */
 408               	/* frame size = 0 */
 409               	/* stack size = 0 */
 410               	.L__stack_usage = 0
 411 0104 FC01      		movw r30,r24
 315:dependencies/hal/xmega/usart_driver.c **** 	if(usart->CTRLB & USART_RXB8_bm) {
 412               		.loc 1 315 0
 413 0106 8481      		ldd r24,Z+4
 414               	.LVL50:
 415 0108 80FF      		sbrs r24,0
 416 010a 00C0      		rjmp .L24
 316:dependencies/hal/xmega/usart_driver.c **** 		return(0x0100 | usart->DATA);
 417               		.loc 1 316 0
 418 010c 8081      		ld r24,Z
 419 010e 90E0      		ldi r25,0
 420 0110 9160      		ori r25,1
 421 0112 0895      		ret
 422               	.L24:
 317:dependencies/hal/xmega/usart_driver.c **** 	}else {
 318:dependencies/hal/xmega/usart_driver.c **** 		return(usart->DATA);
 423               		.loc 1 318 0
 424 0114 8081      		ld r24,Z
 425 0116 90E0      		ldi r25,0
 426               	/* epilogue start */
 319:dependencies/hal/xmega/usart_driver.c **** 	}
 320:dependencies/hal/xmega/usart_driver.c **** }
 427               		.loc 1 320 0
 428 0118 0895      		ret
 429               		.cfi_endproc
 430               	.LFE20:
 432               	.Letext0:
 433               		.file 2 "/usr/lib/avr/include/stdint.h"
 434               		.file 3 "/usr/lib/gcc/avr/7.3.0/include/stddef.h"
 435               		.file 4 "/usr/lib/avr/include/stdlib.h"
 436               		.file 5 "/usr/lib/avr/include/avr/iox128d3.h"
 437               		.file 6 "dependencies/hal/xmega/usart_driver.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 usart_driver.c
     /tmp/ccOnIe5p.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccOnIe5p.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccOnIe5p.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccOnIe5p.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccOnIe5p.s:6      *ABS*:0000000000000034 __CCP__
     /tmp/ccOnIe5p.s:7      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccOnIe5p.s:8      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccOnIe5p.s:14     .text:0000000000000000 USART_InterruptDriver_Initialize
     /tmp/ccOnIe5p.s:46     .text:0000000000000012 USART_InterruptDriver_DreInterruptLevel_Set
     /tmp/ccOnIe5p.s:66     .text:0000000000000018 USART_TXBuffer_FreeSpace
     /tmp/ccOnIe5p.s:102    .text:000000000000002c USART_TXBuffer_PutByte
     /tmp/ccOnIe5p.s:174    .text:0000000000000064 USART_RXBufferData_Available
     /tmp/ccOnIe5p.s:205    .text:0000000000000074 USART_RXBuffer_GetByte
     /tmp/ccOnIe5p.s:237    .text:000000000000008c USART_RXComplete
     /tmp/ccOnIe5p.s:292    .text:00000000000000b6 USART_DataRegEmpty
     /tmp/ccOnIe5p.s:367    .text:00000000000000f0 USART_NineBits_PutChar
     /tmp/ccOnIe5p.s:402    .text:0000000000000104 USART_NineBits_GetChar

NO UNDEFINED SYMBOLS
